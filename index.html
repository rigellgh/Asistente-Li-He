<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente Li He - Contratos Internacionales</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            min-height: 100vh;
            background: linear-gradient(to bottom, #0a192f, #112240);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow-x: hidden;
        }
        
        .world-map {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 168, 204, 0.15) 0px, transparent 10%),
                radial-gradient(circle at 80% 70%, rgba(100, 255, 218, 0.1) 0px, transparent 15%),
                radial-gradient(circle at 40% 80%, rgba(0, 168, 204, 0.12) 0px, transparent 12%),
                radial-gradient(circle at 60% 20%, rgba(100, 255, 218, 0.1) 0px, transparent 18%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 500" width="1000" height="500"><defs><linearGradient id="ocean" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23005c82;stop-opacity:0.2" /><stop offset="100%" style="stop-color:%23003b5c;stop-opacity:0.2" /></linearGradient><linearGradient id="land" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23175c33;stop-opacity:0.2" /><stop offset="100%" style="stop-color:%230d4024;stop-opacity:0.2" /></linearGradient></defs><rect width="1000" height="500" fill="url(%23ocean)"/><path d="M150,200 C200,150 250,180 300,200 C350,220 400,210 450,230 C500,250 550,240 600,260 C650,280 700,270 750,290 C800,310 850,300 850,300 L850,350 C800,340 750,350 700,330 C650,310 600,320 550,300 C500,280 450,290 400,270 C350,250 300,260 250,240 C200,220 150,230 150,230 Z" fill="url(%23land)"/><path d="M200,300 C250,280 300,290 350,310 C400,330 450,320 500,340 C550,360 600,350 650,370 C700,390 750,380 800,400 C820,410 830,400 830,400 L830,450 C780,440 730,450 680,430 C630,410 580,420 530,400 C480,380 430,390 380,370 C330,350 280,360 230,340 C210,330 200,320 200,320 Z" fill="url(%23land)"/></svg>');
            background-size: cover;
            background-position: center;
            opacity: 0.4;
            z-index: -1;
            animation: pulseBackground 30s ease-in-out infinite;
        }
        
        @keyframes pulseBackground {
            0%, 100% {
                opacity: 0.4;
                transform: scale(1);
            }
            50% {
                opacity: 0.5;
                transform: scale(1.02);
            }
        }
        
        .content {
            max-width: 900px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            margin: 40px 0;
            animation: fadeIn 1.5s ease-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: none;
        }
        
        .profile-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 40px;
        }
        
        .profile-img {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64ffda, #00a8cc);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            font-size: 70px;
            color: white;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            border: none;
        }
        
        h1 {
            font-size: 3.2rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #64ffda, #00a8cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        h2 {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #a8d8ea;
            font-weight: 400;
        }
        
        .intro {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 40px;
            text-align: center;
            color: #e0f7fa;
            background: rgba(0, 0, 0, 0.15);
            padding: 25px;
            border-radius: 15px;
            border-left: none;
        }
        
        .services {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 50px 0;
        }
        
        .service {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 18px;
            text-align: left;
            transition: all 0.4s ease;
            border: none;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .service:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            background: rgba(255, 255, 255, 0.08);
        }
        
        .service h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #64ffda;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .service h3 i {
            font-size: 1.8rem;
        }
        
        .service p {
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 25px;
            color: #b3e5fc;
        }
        
        .languages {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .language {
            background: rgba(100, 255, 218, 0.08);
            padding: 12px 20px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 10px;
            border: none;
        }
        
        .language i {
            color: #64ffda;
        }
        
        .chatbot-container {
            position: fixed;
            bottom: 40px;
            right: 40px;
            z-index: 1000;
        }
        
        .chatbot-button {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64ffda, #00a8cc);
            border: none;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
            position: relative;
        }
        
        .chatbot-button:hover {
            transform: scale(1.15);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        
        .chatbot-button i {
            font-size: 36px;
            color: white;
        }
        
        .notification {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 30px;
            height: 30px;
            background: #ff5252;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            animation: pulse 1.5s infinite;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .chat-window {
            position: absolute;
            bottom: 110px;
            right: 0;
            width: 380px;
            height: 500px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
            display: none;
            flex-direction: column;
            overflow: hidden;
            animation: slideUp 0.4s ease-out;
            border: none;
        }
        
        .chat-header {
            background: linear-gradient(135deg, #64ffda, #00a8cc);
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: none;
        }
        
        .chat-header h3 {
            margin: 0;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            font-weight: 500;
            gap: 10px;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            background: #4ade80;
            border-radius: 50%;
        }
        
        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .close-button:hover {
            transform: rotate(90deg);
        }
        
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f5f7fb;
        }
        
        .message {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 20px;
            max-width: 80%;
            word-wrap: break-word;
            line-height: 1.5;
            position: relative;
        }
        
        .bot-message {
            background: #e3f2fd;
            color: #1565c0;
            border-top-left-radius: 5px;
            align-self: flex-start;
        }
        
        .user-message {
            background: linear-gradient(135deg, #64ffda, #00a8cc);
            color: white;
            border-top-right-radius: 5px;
            align-self: flex-end;
            margin-left: auto;
        }
        
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .option-button {
            background: rgba(30, 136, 229, 0.1);
            border: 1px solid rgba(30, 136, 229, 0.2);
            border-radius: 18px;
            padding: 12px 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            color: #1565c0;
            font-weight: 500;
        }
        
        .option-button:hover {
            background: rgba(30, 136, 229, 0.2);
            transform: translateX(5px);
        }
        
        .chat-input-container {
            padding: 15px 20px;
            background: white;
            display: flex;
            flex-direction: column;
            border-top: none;
        }
        
        .input-buttons {
            display: flex;
            margin-bottom: 10px;
        }
        
        .attach-button {
            background: #f1f3f4;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            transition: all 0.2s;
        }
        
        .attach-button:hover {
            background: #e6e8e9;
            transform: scale(1.05);
        }
        
        .attach-button i {
            color: #5f6368;
            font-size: 18px;
        }
        
        .file-name {
            font-size: 12px;
            color: #5f6368;
            margin-left: 10px;
            display: none;
            align-items: center;
        }
        
        .chat-input-row {
            display: flex;
            align-items: center;
        }
        
        .chat-input {
            flex: 1;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 30px;
            outline: none;
            margin-right: 15px;
            font-size: 1rem;
        }
        
        .send-button {
            background: linear-gradient(135deg, #64ffda, #00a8cc);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }
        
        .send-button:hover {
            transform: scale(1.1);
        }
        
        .send-button i {
            font-size: 20px;
        }
        
        .verification-badge {
            display: inline-block;
            background: #4ade80;
            color: white;
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .processing {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #5f6368;
            font-style: italic;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(100, 255, 218, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 12px rgba(100, 255, 218, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(100, 255, 218, 0); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 900px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 1.5rem; }
            .content {
                padding: 30px;
                width: 95%;
            }
            .services {
                grid-template-columns: 1fr;
            }
            .profile-img {
                width: 150px;
                height: 150px;
                font-size: 60px;
            }
            .chat-window {
                width: 90%;
                right: 5%;
            }
            .chatbot-container {
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="world-map"></div>
    
    <div class="content">
        <div class="profile-header">
            <div class="profile-img">
                <i class="fas fa-globe-americas"></i>
            </div>
            
            <h1>Asistente Li He</h1>
            <h2>Especialista en Contratos Internacionales</h2>
            
            <div class="intro">
                <p>Asistencia especializada en contratos internacionales con servicios de traducción legal, verificación de documentos y revisión de contratos en inglés, español y chino mandarín.</p>
            </div>
        </div>
        
        <div class="services">
            <div class="service">
                <h3><i class="fas fa-language"></i> Traductor Legal</h3>
                <p>Servicios de traducción legal especializada para contratos y documentos internacionales con precisión terminológica y conocimiento jurídico.</p>
                
                <div class="languages">
                    <div class="language">
                        <i class="fas fa-check-circle"></i>
                        <span>Inglés jurídico</span>
                    </div>
                    <div class="language">
                        <i class="fas fa-check-circle"></i>
                        <span>Español jurídico</span>
                    </div>
                    <div class="language">
                        <i class="fas fa-check-circle"></i>
                        <span>Chino mandarín jurídico</span>
                    </div>
                </div>
            </div>
            
            <div class="service">
                <h3><i class="fas fa-file-contract"></i> Verificación de Contratos</h3>
                <p>Verificación de autenticidad, validez legal y cumplimiento normativo de contratos internacionales mediante tecnología blockchain.</p>
                
                <div class="languages">
                    <div class="language">
                        <i class="fas fa-check-circle"></i>
                        <span>Autenticidad documental</span>
                    </div>
                    <div class="language">
                        <i class="fas fa-check-circle"></i>
                        <span>Validez legal</span>
                    </div>
                    <div class="language">
                        <i class="fas fa-check-circle"></i>
                        <span>Blockchain verification</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="chatbot-container">
        <button class="chatbot-button" onclick="toggleChat()">
            <i class="fas fa-comments"></i>
            <div class="notification">1</div>
        </button>
        
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h3><span class="status-indicator"></span>Li He - Asistente Virtual</h3>
                <button class="close-button" onclick="toggleChat()">×</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot-message">
                    ¡Hola! Soy Li He, tu asistente para contratos internacionales. 😊<br>
                    ¿En qué puedo ayudarte hoy? Puedo ayudarte con:
                    <div class="options-container">
                        <button class="option-button" onclick="handleOptionClick('traduccion')">
                            <i class="fas fa-language"></i> Traducción de documentos
                        </button>
                        <button class="option-button" onclick="handleOptionClick('verificacion')">
                            <i class="fas fa-check-circle"></i> Verificación de contratos
                        </button>
                        <button class="option-button" onclick="handleOptionClick('terminos')">
                            <i class="fas fa-gavel"></i> Explicación de términos legales
                        </button>
                    </div>
                </div>
            </div>
            <div class="chat-input-container">
                <div class="input-buttons">
                    <label for="fileInput" class="attach-button">
                        <i class="fas fa-paperclip"></i>
                    </label>
                    <input type="file" id="fileInput" style="display: none;" onchange="handleFileSelect(event)" accept=".doc,.docx,.pdf,.txt">
                    <div class="file-name" id="fileName"></div>
                </div>
                <div class="chat-input-row">
                    <input type="text" id="userInput" class="chat-input" placeholder="Escribe tu mensaje..." onkeypress="handleKeyPress(event)">
                    <button class="send-button" onclick="sendMessage()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables para el estado de la conversación
        let currentFileName = '';
        let currentFileType = '';
        let conversationContext = {
            awaitingLanguageChoice: false,
            awaitingVerification: false,
            awaitingTermExplanation: false,
            currentService: null
        };
        
        // Base de datos de términos legales
        const legalTerms = {
            'fob': {
                es: 'FOB (Free On Board) - El vendedor entrega la mercancía a bordo del buque designado por el comprador.',
                en: 'FOB (Free On Board) - The seller delivers the goods on board the vessel nominated by the buyer.',
                zh: 'FOB (船上交货) - 卖方在买方指定的船上交付货物。',
                examples: ['El precio es FOB puerto de Shanghai', 'Payment: FOB terms apply']
            },
            'cif': {
                es: 'CIF (Cost, Insurance and Freight) - El vendedor paga el costo, seguro y flete hasta el puerto de destino.',
                en: 'CIF (Cost, Insurance and Freight) - The seller pays costs, insurance, and freight to the destination port.',
                zh: 'CIF (成本加保险费加运费) - 卖方支付至目的港的成本、保险和运费。',
                examples: ['Precio CIF puerto de Valparaíso', 'Offer: CIF main port of destination']
            },
            'lc': {
                es: 'LC (Letter of Credit) - Instrumento financiero que garantiza el pago al vendedor una vez cumplidos los términos.',
                en: 'LC (Letter of Credit) - Financial instrument guaranteeing payment to the seller once terms are met.',
                zh: 'LC (信用证) - 一旦条款满足即保证向卖方付款的金融工具。',
                examples: ['Pago mediante LC irrevocable', 'Payment by confirmed LC required']
            }
        };
        
        function toggleChat() {
            const chatWindow = document.getElementById('chatWindow');
            const notification = document.querySelector('.notification');
            
            if (chatWindow.style.display === 'flex') {
                chatWindow.style.display = 'none';
                notification.style.display = 'flex';
            } else {
                chatWindow.style.display = 'flex';
                notification.style.display = 'none';
                
                // Scroll to bottom of chat
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }
        
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        
        function handleOptionClick(option) {
            switch(option) {
                case 'traduccion':
                    conversationContext.currentService = 'translation';
                    addBotMessage('Perfecto. ¿Qué documento necesitas traducir? Puedes adjuntarlo usando el clip o describir lo que necesitas.');
                    break;
                case 'verificacion':
                    conversationContext.currentService = 'verification';
                    addBotMessage('Excelente. Sube el contrato que deseas verificar o compárteme el hash de blockchain para validar su autenticidad.');
                    break;
                case 'terminos':
                    conversationContext.currentService = 'terms';
                    addBotMessage('Pregúntame sobre cualquier término legal que no entiendas. Por ejemplo: "¿Qué significa FOB?" o "Explica CIF".');
                    break;
            }
        }
        
        function handleFileSelect(event) {
            const fileInput = event.target;
            const fileNameDisplay = document.getElementById('fileName');
            
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                currentFileName = file.name;
                currentFileType = file.type;
                fileNameDisplay.textContent = file.name;
                fileNameDisplay.style.display = 'flex';
                
                // Add a message about the file
                addUserMessage(`Archivo adjunto: ${file.name}`);
                
                // Determine next steps based on conversation context
                setTimeout(() => {
                    if (conversationContext.currentService === 'translation') {
                        askForTranslationPreferences();
                    } else if (conversationContext.currentService === 'verification') {
                        startVerificationProcess();
                    } else {
                        // Default to translation if no specific service selected
                        askForTranslationPreferences();
                    }
                }, 1000);
            }
        }
        
        function askForTranslationPreferences() {
            addBotMessage(`He recibido tu archivo <strong>${currentFileName}</strong>. ¿A qué idioma necesitas traducirlo?`, [
                { text: 'Español', action: 'processTranslationRequest("español")' },
                { text: 'Inglés', action: 'processTranslationRequest("inglés")' },
                { text: 'Chino mandarín', action: 'processTranslationRequest("chino mandarín")' }
            ]);
            conversationContext.awaitingLanguageChoice = true;
        }
        
        function startVerificationProcess() {
            addBotMessage(`He recibido tu contrato <strong>${currentFileName}</strong>. Comenzaré el proceso de verificación.`);
            
            // Show processing message
            const processingElement = document.createElement('div');
            processingElement.classList.add('message', 'bot-message', 'processing');
            processingElement.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Verificando autenticidad del documento...`;
            document.getElementById('chatMessages').appendChild(processingElement);
            
            // Scroll to bottom
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate verification process
            setTimeout(() => {
                // Remove processing message
                chatMessages.removeChild(processingElement);
                
                // Simulate verification results (in a real scenario, this would be actual verification)
                const isVerified = Math.random() > 0.3; // 70% chance of being verified
                
                if (isVerified) {
                    addBotMessage(`✅ <strong>Verificación exitosa</strong><br>El contrato <strong>${currentFileName}</strong> ha sido verificado correctamente.<br><span class="verification-badge">Auténtico</span><br><br>Hash de verificación: <code>0x${generateRandomHash()}</code>`);
                } else {
                    addBotMessage(`❌ <strong>Problema de verificación</strong><br>He detectado algunas inconsistencias en el contrato <strong>${currentFileName}</strong>. Te recomiendo revisar:<br><br>- Las cláusulas 4.2 y 7.3 requieren atención<br>- La firma digital no coincide con los registros<br>- Faltan algunas páginas del anexo B`);
                }
                
                addBotMessage('¿Necesitas ayuda con algo más?');
            }, 3000);
        }
        
        function processTranslationRequest(language) {
            addUserMessage(language.charAt(0).toUpperCase() + language.slice(1));
            
            // Reset state
            conversationContext.awaitingLanguageChoice = false;
            
            // Show processing message
            const processingElement = document.createElement('div');
            processingElement.classList.add('message', 'bot-message', 'processing');
            processingElement.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Traduciendo ${currentFileName} al ${language}...`;
            document.getElementById('chatMessages').appendChild(processingElement);
            
            // Scroll to bottom
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate translation process
            setTimeout(() => {
                // Remove processing message
                chatMessages.removeChild(processingElement);
                
                // Show completion message
                addBotMessage(`¡Traducción completada! He traducido <strong>${currentFileName}</strong> al ${language}.<br><br>Puedes descargar el documento traducido <a href="#" style="color: #1565c0; text-decoration: underline;">aquí</a>.`);
                
                // Add some translation notes
                addBotMessage(`<strong>Notas de traducción:</strong><br>- He conservado los términos técnicos en su idioma original cuando era apropiado<br>- Las referencias legales se han adaptado al sistema jurídico destino<br>- Los formatos de fecha y números se han localizado correctamente`);
                
                addBotMessage('¿Necesitas algo más?');
            }, 4000);
        }
        
        function explainLegalTerm(term) {
            const termKey = term.toLowerCase();
            
            if (legalTerms[termKey]) {
                const termInfo = legalTerms[termKey];
                addBotMessage(`<strong>${term.toUpperCase()}</strong><br><br>` +
                    `<strong>Español:</strong> ${termInfo.es}<br>` +
                    `<strong>English:</strong> ${termInfo.en}<br>` +
                    `<strong>中文:</strong> ${termInfo.zh}<br><br>` +
                    `<strong>Ejemplos:</strong><br>• ${termInfo.examples[0]}<br>• ${termInfo.examples[1]}`);
            } else {
                addBotMessage(`No tengo información específica sobre "${term}". ¿Podrías proporcionar más contexto o verificar la ortografía?`);
            }
        }
        
        function sendMessage() {
            const userInput = document.getElementById('userInput');
            const message = userInput.value.trim();
            
            if (message !== '') {
                // Add user message
                addUserMessage(message);
                
                // Clear input
                userInput.value = '';
                
                // Process message
                processUserMessage(message);
            }
        }
        
        function processUserMessage(message) {
            // Check if we're waiting for language choice
            if (conversationContext.awaitingLanguageChoice) {
                if (message.toLowerCase().includes('español') || message.toLowerCase().includes('spanish')) {
                    processTranslationRequest('español');
                } else if (message.toLowerCase().includes('inglés') || message.toLowerCase().includes('english')) {
                    processTranslationRequest('inglés');
                } else if (message.toLowerCase().includes('chino') || message.toLowerCase().includes('chinese') || message.toLowerCase().includes('mandarín') || message.toLowerCase().includes('mandarin')) {
                    processTranslationRequest('chino mandarín');
                } else {
                    addBotMessage('No entendí tu elección de idioma. Por favor selecciona entre: Español, Inglés o Chino mandarín.');
                }
                return;
            }
            
            // Check if user is asking about a legal term
            const termMatch = message.match(/(?:qué es|qué significa|explique|explica|what is|what does|define)\s+([a-zA-Záéíóúñü]+)/i);
            if (termMatch) {
                const term = termMatch[1];
                explainLegalTerm(term);
                return;
            }
            
            // Check for greeting
            if (message.match(/(hola|hi|hello|buenos días|buenas tardes|你好)/i)) {
                addBotMessage('¡Hola! ¿En qué puedo ayudarte con tus contratos internacionales hoy?');
                return;
            }
            
            // Check for thanks
            if (message.match(/(gracias|thank you|thanks|谢谢)/i)) {
                addBotMessage('¡De nada! Estoy aquí para ayudarte. ¿Necesitas asistencia con algo más?');
                return;
            }
            
            // Default response
            addBotMessage('Puedo ayudarte con:<br><br>' +
                '- Traducción de documentos legales<br>' +
                '- Verificación de autenticidad de contratos<br>' +
                '- Explicación de términos legales<br><br>' +
                '¿En qué te puedo asistir?');
        }
        
        function addUserMessage(message) {
            const userMessageElement = document.createElement('div');
            userMessageElement.classList.add('message', 'user-message');
            userMessageElement.textContent = message;
            document.getElementById('chatMessages').appendChild(userMessageElement);
            
            // Scroll to bottom
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function addBotMessage(message, options = null) {
            const botMessageElement = document.createElement('div');
            botMessageElement.classList.add('message', 'bot-message');
            botMessageElement.innerHTML = message;
            
            if (options && options.length > 0) {
                const optionsContainer = document.createElement('div');
                optionsContainer.classList.add('options-container');
                
                options.forEach(option => {
                    const button = document.createElement('button');
                    button.classList.add('option-button');
                    button.innerHTML = option.text;
                    button.onclick = function() {
                        eval(option.action);
                    };
                    optionsContainer.appendChild(button);
                });
                
                botMessageElement.appendChild(optionsContainer);
            }
            
            document.getElementById('chatMessages').appendChild(botMessageElement);
            
            // Scroll to bottom
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function generateRandomHash() {
            return Array.from({length: 64}, () => Math.floor(Math.random() * 16).toString(16)).join('');
        }
        
        // Initialize with animation
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('.content').style.animation = 'fadeIn 1.5s ease-out';
        });
    </script>
</body>
</html>
